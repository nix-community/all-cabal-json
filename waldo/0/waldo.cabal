Name:                waldo
Version:             0
Synopsis: A generator of comics based on some ascertainable data about the requester.
Description: This package was writen to power <https://xkcd.com/ xkcd>'s 2012 April Fools comic <https://xkcd.com/1037 Umwelt>. It uses several datasets and a script to generate a customized story specific to the user viewing it.
License:             BSD3
License-file:        LICENSE
Author:              davean
Maintainer:          oss@xkcd.com
Copyright:           davean 2012-2017
Category:            Web
Build-type:          Simple
Cabal-version:       >=1.10

extra-source-files:
  resize.sh

data-files:
  js/waldo.js
  testcomic.html
  panels/*.png

source-repository head
  type: git
  location: https://code.xkrd.net/xkcd/waldo.git

library
  default-language: Haskell2010
  hs-source-dirs: src
  other-modules: Paths_waldo
  exposed-modules:
          Waldo.CityLoc
        , Waldo.Script
        , Waldo.Stalk
        , Waldo.StoryExample
        , Waldo.Story
        , Waldo.Waldo
        , Waldo.Server
  Build-depends:
      base >= 4.9 && < 4.11
    , deepseq >= 1.4 && < 1.5
    , directory >= 1.3 && < 1.4
    , bytestring >= 0.10 && < 0.11
    , text >= 1.2 && < 1.3
    , aeson >= 1.2 && < 1.3
    , aeson-pretty >= 0.8 && < 0.9
    , mtl >= 2.2 && < 2.3
    , unordered-containers >= 0.2 && < 0.3
    , network >= 2.6 && < 2.7
    , network-uri >= 2.6 && < 2.7
    , lrucache >= 1.2 && < 1.3
    , attoparsec >= 0.13 && < 0.14
    , hs-GeoIP >= 0.3 && < 0.4
    , filepath >= 1.4 && < 1.5
    , resourcet >= 1.1 && < 1.2
    , conduit >= 1.2 && < 1.3
    , conduit-extra >= 1.1 && < 1.2
    , imagesize-conduit >= 1.1 && < 1.2
    , zlib-conduit >= 1.1 && < 1.2
    , wai >= 3.2 && < 3.3
    , http-types >= 0.9 && < 0.10
    , case-insensitive >= 1.2 && < 1.3
    , warp >= 3.2 && < 3.3
    , blaze-builder >= 0.4 && < 0.5
    , safe >= 0.3 && < 0.4
    , regex-tdfa >= 1.2 && < 1.3
    , Geodetic >= 0.4 && < 0.5
    , SHA >= 1.6 && < 1.7
    , Glob >= 0.7 && < 0.8
    , browscap >= 0 && < 0.1

Executable waldo-example
  default-language: Haskell2010
  Ghc-Options: -rtsopts -threaded
  Main-is: tools/WaldoServer.hs
  other-modules: Paths_waldo
  Build-depends:
      base
    , waldo
    , wai >= 3.2 && < 3.3
    , wai-extra >= 3.0 && < 3.1
    , wai-app-static >= 3.1 && < 3.2
    , http-types >= 0.9 && < 0.10
    , warp >= 3.2 && < 3.3
    , safe

Executable bench
  default-language: Haskell2010
  Ghc-Options: -rtsopts -threaded
  Main-is: tools/LoadTest.hs
  Build-depends:
      base
    , waldo
    , deepseq
    , bytestring
    , mtl
    , aeson
    , unordered-containers
    , resourcet
    , conduit
    , conduit-extra
    , zlib-conduit

