-- Initial htt.cabal generated by cabal init.  For further documentation, 
-- see http://haskell.org/cabal/users-guide/
-- The name of the package.
name:                libhbb

-- The package version.  See the Haskell package versioning policy (PVP) 
-- for standards guiding when and how versions should be incremented.
-- http://www.haskell.org/haskellwiki/Package_versioning_policy
-- PVP summary:      +-+------- breaking API changes
--                   | | +----- non-breaking API additions
--                   | | | +--- code changes with no API change
version:             0.4.0.0

-- A short (one-line) description of the package.
synopsis:            Backend for text editors to provide better Haskell editing support.

-- A longer description of the package.
description:         This project contains a library that utilizes the GHC API
                     to provide some special features for Haskell text editors.
                     Libhbb has been designed to extend ghc-mod (which does
                     similar tasks) with certain features. However libhbb is
                     completely independent of ghc-mod. The connection to
                     ghc-mod is established in a package called hbb. The
                     features of libhbb can be used standalone by the means of
                     the executable libhbb-cli which is sipped as well.

                     The big outstanding feature that libhbb provides is the
                     ability to inline functions (their body is converted to a
                     lambda function and written in place of the according
                     name).

-- URL for the project homepage or repository.
homepage:            https://bitbucket.org/bhris/libhbb

-- The license under which the package is released.
license:             LGPL-2.1

-- The file containing the license text.
license-file:        LICENSE

-- The package author(s).
author:              Christian Wolf

-- An email address to which users can send suggestions, bug reports, and 
-- patches.
maintainer:          contact@wolf-kissendorf.de

-- A copyright notice.
-- copyright:           

category:            Development

build-type:          Simple

-- Constraint on the version of Cabal needed to build this package.
cabal-version:       >= 1.8

source-repository head
    type:            git
    location:        https://bitbucket.org/bhris/libhbb.git

-- This executable 'libhbb-cli' exposes the features of the library. There is
-- also an executable 'hbb' in another project which integrates the features of
-- 'ghc-mod' and 'libhbb' and therefore has much more features (as well as
-- cabal integration)
executable libhbb-cli
    -- .hs or .lhs file containing the Main module.
    main-is:            LibHbbCli.hs

    --Default-Language:   Haskell2010
    
    HS-Source-Dirs:     ./src

    -- Default-Extensions: ConstraintKinds, FlexibleContexts
    
    -- Other library packages from which modules are imported.
    build-depends:      base == 4.* , libhbb == 0.4.*, bytestring >= 0.10, directory >= 1.2

library
    exposed-modules:  Language.Haskell.HBB.Internal.InternalTTreeCreation
                      Language.Haskell.HBB.Internal.InterfaceTypes
                      Language.Haskell.HBB.Internal.InternalTTree
                      Language.Haskell.HBB.Internal.GHCHighlevel
                      Language.Haskell.HBB.Internal.TTreeColor
                      Language.Haskell.HBB.Internal.TTreeJSON
                      Language.Haskell.HBB.Internal.SrcSpan
                      Language.Haskell.HBB.Internal.TTree
                      Language.Haskell.HBB.Internal.Lexer
                      Language.Haskell.HBB.Internal.GHC
                      Language.Haskell.HBB.Internal.AST
                      Language.Haskell.HBB.TestModes.ApplyTTree
                      Language.Haskell.HBB.OccurrencesOf
                      Language.Haskell.HBB.SmartInline
                      Language.Haskell.HBB.ExprType
                      Language.Haskell.HBB.ApplyTo
                      Language.Haskell.HBB.Inline
                      Language.Haskell.HBB.Locate

    -- Default-Language: Haskell2010

    HS-Source-Dirs:   .

    build-depends:    base,
                      ghc >= 7.6,
                      syb >= 0.4,
                      ghc-paths >= 0.1,
                      mtl >= 2.1,
                      text >= 1.1,
                      aeson >= 0.7,
                      unordered-containers >= 0.2,
                      bytestring >= 0.10,
                      time >= 1.4,
                      process >= 1.1,
                      filepath >= 1.3,
                      directory >= 1.2

Test-Suite spec
  Main-Is:              Main.hs
  Hs-Source-Dirs:       test
  Type:                 exitcode-stdio-1.0
  Build-Depends:        base
                      , ghc
                      , hspec >= 1.7.1
                      , syb
                      , libhbb
                      , bytestring >= 0.10.0.2
                      , ghc-paths
                      , mtl
