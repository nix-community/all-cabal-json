name:                time-warp
version:             0.1.1.2
synopsis:            distributed systems execution emulation
homepage:            https://github.com/serokell/time-warp
bug-reports:         https://github.com/serokell/time-warp/issues
license:             GPL-3
license-file:        LICENSE
author:              Serokell
maintainer:          Serokell <hi@serokell.io>
copyright:           2016 Serokell
build-type:          Simple
cabal-version:       >=1.18
category:            Control, Network
synopsis:            Distributed systems execution emulation
description:         This package allows to write scenarios over distributed
                     systems, which can be launched as either real program or
                     fast emulation without need to wait for delays and with
                     network nastiness manually controlled.

library
  exposed-modules:     Control.TimeWarp.Logging

                     , Control.TimeWarp.Rpc
                     , Control.TimeWarp.Rpc.MonadRpc
                     , Control.TimeWarp.Rpc.MsgPackRpc
                     , Control.TimeWarp.Rpc.PureRpc
                     , Control.TimeWarp.Rpc.Restriction

                     , Control.TimeWarp.Timed
                     , Control.TimeWarp.Timed.MonadTimed
                     , Control.TimeWarp.Timed.Misc
                     , Control.TimeWarp.Timed.TimedIO
                     , Control.TimeWarp.Timed.TimedT
  build-depends:       ansi-terminal
                     , base >= 4.8 && < 5
                     , bytestring >= 0.10.6.0
                     , containers
                     , data-default
                     , data-msgpack >= 0.0.8
                     , exceptions
                     , formatting
                     , hslogger
                     , lens
                     , lifted-base >= 0.2.3
                     , mtl
                     , MonadRandom
                     , monad-loops
                     , monad-control
                     , network-msgpack-rpc == 0.0.1
                     , pqueue
                     , QuickCheck >= 2.8.1
                     , quickcheck-instances
                     , random >= 1.1
                     , safe
                     , serokell-util >= 0.1.1.1
                     , stm >= 2.4.4
                     , template-haskell
                     , text >= 1.2.2.0
                     , text-format
                     , time
                     , time-units >= 1.0.0
                     , transformers >= 0.4.2.0
                     , transformers-base
  hs-source-dirs:      src
  default-language:    Haskell2010
  ghc-options:         -Wall -fno-warn-orphans
  default-extensions:  RecordWildCards
                     , OverloadedStrings
                     , DeriveDataTypeable
                     , GeneralizedNewtypeDeriving

test-suite time-warp-test
  main-is:             Test.hs
  other-modules:       Test.Control.TimeWarp.Rpc.MonadRpcSpec

                     , Test.Control.TimeWarp.Timed.ExceptionSpec
                     , Test.Control.TimeWarp.Timed.MonadTimedSpec

                     , Test.Control.TimeWarp.Common

                     , Spec
  type:                exitcode-stdio-1.0
  build-depends:       async >= 2.0.1
                     , base >= 4.8 && < 5
                     , data-default
                     , data-msgpack >= 0.0.8
                     , exceptions >= 0.8.2.1
                     , hspec >= 2.1.10
                     , lens >= 4.13
                     , mtl
                     , network-msgpack-rpc == 0.0.1
                     , QuickCheck >= 2.8.1
                     , serokell-util >= 0.1.1.1
                     , stm >= 2.4.4.1
                     , text >= 1.2.2.0
                     , text-format
                     , time-units >= 1.0.0
                     , time-warp
                     , transformers >= 0.4.2.0
                     , random >= 1.1
  hs-source-dirs:      test
  default-language:    Haskell2010
  ghc-options:         -threaded -Wall -fno-warn-orphans
  default-extensions:  OverloadedStrings
                     , RecordWildCards
                     , DeriveDataTypeable
                     , GeneralizedNewtypeDeriving

executable token-ring
  main-is:             Main.hs
  build-depends:       async >= 2.0.1
                     , base >= 4.8 && < 5
                     , data-default
                     , data-msgpack >= 0.0.8
                     , exceptions >= 0.8.2.1
                     , formatting
                     , hspec >= 2.1.10
                     , lens >= 4.13
                     , network-msgpack-rpc == 0.0.1
                     , MonadRandom
                     , mtl
                     , QuickCheck >= 2.8.1
                     , serokell-util >= 0.1.1.1
                     , stm >= 2.4.4.1
                     , text >= 1.2.2.0
                     , text-format
                     , time-units >= 1.0.0
                     , time-warp
                     , transformers >= 0.4.2.0
                     , random >= 1.1
  hs-source-dirs:      examples/token-ring
  default-language:    Haskell2010  
  ghc-options:         -threaded -Wall -fno-warn-orphans
  default-extensions:  OverloadedStrings
                     , RecordWildCards
                     , DeriveDataTypeable
                     , GeneralizedNewtypeDeriving
