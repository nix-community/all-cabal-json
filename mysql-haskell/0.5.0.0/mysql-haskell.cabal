name:                mysql-haskell
version:             0.5.0.0
synopsis:            pure haskell MySQL driver
description:         pure haskell MySQL driver
license:             BSD3
license-file:        LICENSE
author:              winterland1989
maintainer:          winterland1989@gmail.com
copyright:           (c) 2016 Winterland       
category:            Database
build-type:          Simple
extra-source-files:  ChangeLog.md, README.md
cabal-version:       >=1.10
homepage:            https://github.com/winterland1989/mysql-haskell
bug-reports:         https://github.com/winterland1989/mysql-haskell/issues

source-repository head
  type:     git
  location: git://github.com/winterland1989/mysql-haskell.git

flag openssl
  description:  Enable openssl support via @HsOpenSSL@
  default:      True

library
    exposed-modules:    Database.MySQL.Base
                    ,   Database.MySQL.TLS       
                    ,   Database.MySQL.Protocol.Auth
                    ,   Database.MySQL.Protocol.Command
                    ,   Database.MySQL.Protocol.ColumnDef
                    ,   Database.MySQL.Protocol.Packet
                    ,   Database.MySQL.Protocol.MySQLValue
                    ,   Database.MySQL.Protocol.Escape
                    ,   Database.MySQL.BinLog
                    ,   Database.MySQL.BinLogProtocol.BinLogEvent
                    ,   Database.MySQL.BinLogProtocol.BinLogValue
                    ,   Database.MySQL.BinLogProtocol.BinLogMeta
    if flag(openssl)
        exposed-modules: Database.MySQL.OpenSSL


    other-modules:      Database.MySQL.Connection
                    ,   Database.MySQL.Query
    build-depends:      base          >= 4.7 && < 5
                    ,   monad-loops   == 0.4.*
                    ,   network       >= 2.3 && < 3.0
                    ,   io-streams    >= 1.2 && < 2.0
                    ,   tcp-streams   == 0.4.*
                    ,   wire-streams  >= 0.0.2 && < 0.1
                    ,   binary        >= 0.8.4
                    ,   bytestring    >= 0.10.2.0
                    ,   text          >= 1.1 && < 1.3
                    ,   cryptonite    == 0.*
                    ,   memory
                    ,   time          >= 1.5.0
                    ,   scientific    == 0.3.*
                    ,   bytestring-lexing == 0.5.*
                    ,   blaze-textual     == 0.2.*
                    ,   word24            == 1.*
                    ,   tls           >=1.3.5 && < 1.4

    if flag(openssl)
        build-depends:      HsOpenSSL      >=0.10.3 && <0.12
        if os(mingw32) || os(windows)
            extra-libraries: eay32, ssl32
        else
            if os(osx)
                extra-libraries: crypto
                extra-lib-dirs: /usr/local/lib
                include-dirs: /usr/local/include
          else
                extra-libraries: crypto

    default-language:    Haskell2010
    default-extensions:     DeriveDataTypeable
                        ,   DeriveGeneric
                        ,   MultiWayIf
                        ,   OverloadedStrings
    ghc-options:       -Wall

test-suite test
    type: exitcode-stdio-1.0
    main-is: Main.hs
    other-modules:      BinaryRow
                    ,   BinaryRowNew
                    ,   BinLog
                    ,   BinLogNew
                    ,   TextRow
                    ,   TextRowNew
                    ,   ExecuteMany
    hs-source-dirs: test
    build-depends:
        mysql-haskell
      , base
      , bytestring
      , optparse-applicative < 0.13
      , tasty == 0.11.*
      , tasty-hunit
      , text
      , io-streams
      , time
    default-extensions:     MultiWayIf
                        ,   OverloadedStrings

    ghc-options:         -threaded
    default-language:    Haskell2010
