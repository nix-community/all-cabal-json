{
  "description": {
    "spec-version": {
      "Right": ">=1.10"
    },
    "package": {
      "name": "keystore",
      "version": [
        0,
        9,
        0,
        2
      ]
    },
    "license": {
      "Right": "BSD3"
    },
    "license-files": [
      "LICENSE"
    ],
    "copyright": "Chris Dornan",
    "maintainer": "chris@chrisdornan.com",
    "author": "Chris Dornan",
    "stability": "",
    "tested-with": [],
    "homepage": "http://github.com/cdornan/keystore",
    "pkg-url": "",
    "bug-reports": "",
    "source-repos": [
      {
        "kind": {},
        "type": "Git",
        "location": "https://github.com/cdornan/keystore",
        "module": null,
        "branch": null,
        "tag": null,
        "subdir": null
      }
    ],
    "synopsis": "Managing stores of secret things",
    "description": "Writing deployment scripts is a critical yet error-prone activity which we\nwould rather do in Haskell. One of the most difficult aspect of deployment\nscripts is the management of credentials: they cannot be stored in the\nVCS like almost everything else, but need to be organised and accessed\nwhile under lock and key. This is the problem that keystore is trying to solve:\nflexible, secure and well-typed deployment scripts.\n\n/All Haskell/\n\nThis package is written purely in Haskell and all of the cryptographic packages\nit relies upon are written in Haskell.\n\n/JSON Format/\n\nIt stores everything in a JSON format that has proven to be stable. We can can\nuse <http://hackage.haskell.org/package/api-tools migrations> in future\nshould the store need to be reorganized.\n\n/Simple and Flexible Underlying Model/\n\n* /Named Keys/: every key has an name within the store that is associated\nwith some secret data. If the secret data for that key is to be stored then\nit must identify another key in the store that will be used to encrypt the\ndata. (Some keys -- the passwords -- will typically be auto-loaded from\nenvironment variables.)\n* *Functional model*: keys can be deleted and added again but the design\nencourages the retention of the history. The old keys remain available\nbut deployment scripts will naturally select the latest version of a key.\nWhen a key is rotated this merely loads a new generation for the rotated\nkey.\n\n* /Simple Metadata/: oher information, such as the identity of the key\nwith its originating system (e.g., the identifier of an AWS IAM key)\nand some arbitrary textual information (the 'comment') may be associated\nwith a key and accessible without recourse to the key or password needed\nto access the secret information.\n\n* /PKS/: the seret may be a RSA provate key with the public key stored\nseparately in the cler.\n* *MFA*: a secret may be protected with multiple named keys, all of which\nwill be needed to recover the secret text.\n\n* /Hashing/: all keys can be hashed with an appropriate PBKDF-2 function\nand the hashes stored in the clear. These hashes may be sued to verify\npasswords but also can be inserted directly into configuration files\nfor deployment. Precise control of the PBKDF-2 hash paramers is\navaiable.\n\n* /Hierarchical Organization/: keys can be stored in different sections\nwith each key being protected by a master key for that section. Sections\ncan be configured to store the master keys of other sections thereby\ngaining acces to all of the keys in those sections and the keys they\nhave access to.\n\n* /Systems Integration/: keys can automatically loaded from Environment\nvariables. Typically a keystore session will start by settingb up an\nenvironment variable for the deployment section corresponding for\nthe node that you need to deploy to. This will provide access to\nprecisely the keys whose secrets you need to carry out the deployment\nand no more. It only needs access to the hashes of admin keys then they\ncan be placed in separate higher-level @admin@ sections. Provided care\nis taken preparing the environment you will not deploy to the wrong host\n(e.g., a live server rather than a staging server, or the wrong live\nserver) because those keys will not be accessible.\n\n* /Configuration Control/: the parameters controling the encryption and\nhashing functions can be set up independently in each section of the\nstore, allowing for heavier hashing to be used on live servers and\nlight hashing to be used on development and staging servers where\nauthentication needs to be quick.\n\n* /Keystore Integrity/: the keystore can be signed and every operation\nmade to check that the keystore matches its signature (and the public\nsigning key matches an independent copy on the client).\n\n* /External Crypto Operations/: keys in the keystore can be used to sign\nor encrypt external obejcts (provided they can be loaded into memory).\n\n/The Layers/\n\nThe keystore package has several layers. Most users\nwill probably need only the top \"batteries-included\" layer:\n\n* @Data.KeyStore.Sections@: this provides a high-level model that allows\na flexible hierarchical keystore to be set up relatively easily.\nSee the 'deploy' example for details.\n\n* @Data.KeyStore.CLI@ : This provides a stanalone program for inspecting\nand editing your keystores. It can also be embedded into your own\ndeployment app. See the @deploy@ example for details.\n\n* @Data.KeyStore.PasswordManager@ provides a password manager which each\nuser can use to setup their own local password store for holding the\ndeployment passwords and session tokens used to autheticate the server.\n\n* @Data.KeyStore.IO@: this library provides general programatic access to\na keystore through @IO@ primitives. See the source code for the @Sections@\nfor an example of this module in use.\n\n* @Data.KeyStore.KS@: this library provides general programatic access to\na keystore through functional @KS@ primitives. See the source code for\nthe @IO@ for an exteded example this system in action.\n\n* @Data.KeyStore.Types@: This provides access to keystores at the types\nlevel.\n\n/Launch Instructions/\n\nSee the bottom <https://github.com/cdornan/keystore#launch-instructions README>\non GitHub home page for launch instructions for the deploy example.",
    "category": "Cryptography",
    "custom-fields": [],
    "build-type-raw": "Simple",
    "custom-setup": null,
    "library": null,
    "sublibraries": [],
    "executables": [],
    "foreign-libs": [],
    "test-suites": [],
    "benchmarks": [],
    "data-files": [
      "examples/deploy/zshenv/.zshrc",
      "examples/deploy/example-pwstore.dat"
    ],
    "data-dir": ".",
    "extra-source-files": [
      "changelog"
    ],
    "extra-tmp-files": [],
    "extra-doc-files": []
  },
  "library": {
    "condTreeData": {
      "name": {},
      "exposed-modules": [
        [
          "Data",
          "KeyStore"
        ],
        [
          "Data",
          "KeyStore",
          "CLI"
        ],
        [
          "Data",
          "KeyStore",
          "CLI",
          "Command"
        ],
        [
          "Data",
          "KeyStore",
          "IO"
        ],
        [
          "Data",
          "KeyStore",
          "IO",
          "IC"
        ],
        [
          "Data",
          "KeyStore",
          "KS"
        ],
        [
          "Data",
          "KeyStore",
          "KS",
          "Configuration"
        ],
        [
          "Data",
          "KeyStore",
          "KS",
          "CPRNG"
        ],
        [
          "Data",
          "KeyStore",
          "KS",
          "Crypto"
        ],
        [
          "Data",
          "KeyStore",
          "KS",
          "KS"
        ],
        [
          "Data",
          "KeyStore",
          "KS",
          "Opt"
        ],
        [
          "Data",
          "KeyStore",
          "KS",
          "Packet"
        ],
        [
          "Data",
          "KeyStore",
          "PasswordManager"
        ],
        [
          "Data",
          "KeyStore",
          "Sections"
        ],
        [
          "Data",
          "KeyStore",
          "Types"
        ],
        [
          "Data",
          "KeyStore",
          "Types",
          "AesonCompat"
        ],
        [
          "Data",
          "KeyStore",
          "Types",
          "E"
        ],
        [
          "Data",
          "KeyStore",
          "Types",
          "NameAndSafeguard"
        ],
        [
          "Data",
          "KeyStore",
          "Types",
          "PasswordStoreModel"
        ],
        [
          "Data",
          "KeyStore",
          "Types",
          "PasswordStoreSchema"
        ],
        [
          "Data",
          "KeyStore",
          "Types",
          "Schema"
        ],
        [
          "Data",
          "KeyStore",
          "Types",
          "UTC"
        ],
        [
          "Data",
          "KeyStore",
          "Version"
        ]
      ],
      "re-exported-modules": [],
      "signatures": [],
      "exposed": true,
      "visibility": "LibraryVisibilityPublic",
      "build-info": {
        "buildable": true,
        "buildTools": [],
        "buildToolDepends": [],
        "cppOptions": [],
        "asmOptions": [],
        "cmmOptions": [],
        "ccOptions": [],
        "cxxOptions": [],
        "ldOptions": [],
        "pkgconfigDepends": [],
        "frameworks": [],
        "extraFrameworkDirs": [],
        "asmSources": [],
        "cmmSources": [],
        "cSources": [],
        "cxxSources": [],
        "jsSources": [],
        "hsSourceDirs": [
          "src"
        ],
        "otherModules": [
          [
            "Text",
            "KSRegex"
          ]
        ],
        "virtualModules": [],
        "autogenModules": [],
        "defaultLanguage": "Haskell2010",
        "otherLanguages": [],
        "defaultExtensions": [],
        "otherExtensions": [],
        "oldExtensions": [],
        "extraLibs": [],
        "extraGHCiLibs": [],
        "extraBundledLibs": [],
        "extraLibFlavours": [],
        "extraDynLibFlavours": [],
        "extraLibDirs": [],
        "includeDirs": [],
        "includes": [],
        "autogenIncludes": [],
        "installIncludes": [],
        "options": [
          [
            "-Wall",
            "-fno-warn-warnings-deprecations"
          ],
          []
        ],
        "profOptions": [
          [],
          []
        ],
        "sharedOptions": [
          [],
          []
        ],
        "staticOptions": [
          [],
          []
        ],
        "customFieldsBI": [],
        "targetBuildDepends": [
          {
            "package-name": "aeson",
            "version-range": ">=1.5.6.0",
            "library": [
              {}
            ]
          },
          {
            "package-name": "aeson-pretty",
            "version-range": ">=0.7",
            "library": [
              {}
            ]
          },
          {
            "package-name": "api-tools",
            "version-range": ">=0.9.0.0",
            "library": [
              {}
            ]
          },
          {
            "package-name": "array",
            "version-range": ">=0.5.4.0",
            "library": [
              {}
            ]
          },
          {
            "package-name": "asn1-types",
            "version-range": ">=0.2.0",
            "library": [
              {}
            ]
          },
          {
            "package-name": "asn1-encoding",
            "version-range": ">=0.8.0",
            "library": [
              {}
            ]
          },
          {
            "package-name": "ansi-wl-pprint",
            "version-range": ">=0.6.7",
            "library": [
              {}
            ]
          },
          {
            "package-name": "base",
            "version-range": ">=4.8",
            "library": [
              {}
            ]
          },
          {
            "package-name": "base64-bytestring",
            "version-range": ">=1.0",
            "library": [
              {}
            ]
          },
          {
            "package-name": "byteable",
            "version-range": ">=0.1",
            "library": [
              {}
            ]
          },
          {
            "package-name": "bytestring",
            "version-range": ">=0.9",
            "library": [
              {}
            ]
          },
          {
            "package-name": "crypto-pubkey-types",
            "version-range": ">=0.4.3",
            "library": [
              {}
            ]
          },
          {
            "package-name": "crypton",
            "version-range": ">=0.32",
            "library": [
              {}
            ]
          },
          {
            "package-name": "containers",
            "version-range": ">=0.4",
            "library": [
              {}
            ]
          },
          {
            "package-name": "directory",
            "version-range": ">=1.2",
            "library": [
              {}
            ]
          },
          {
            "package-name": "filepath",
            "version-range": ">=1.3",
            "library": [
              {}
            ]
          },
          {
            "package-name": "lens",
            "version-range": ">=3.9.2",
            "library": [
              {}
            ]
          },
          {
            "package-name": "memory",
            "version-range": ">=0.17.0",
            "library": [
              {}
            ]
          },
          {
            "package-name": "mtl",
            "version-range": ">=2",
            "library": [
              {}
            ]
          },
          {
            "package-name": "old-locale",
            "version-range": ">=1.0.0.5",
            "library": [
              {}
            ]
          },
          {
            "package-name": "optparse-applicative",
            "version-range": ">=0.11.0",
            "library": [
              {}
            ]
          },
          {
            "package-name": "pbkdf",
            "version-range": ">=1.1.1.0",
            "library": [
              {}
            ]
          },
          {
            "package-name": "regex",
            "version-range": ">=1.0.1.3",
            "library": [
              {}
            ]
          },
          {
            "package-name": "regex-base",
            "version-range": ">=0.94.0.2",
            "library": [
              {}
            ]
          },
          {
            "package-name": "regex-tdfa",
            "version-range": ">=1.3.1.2",
            "library": [
              {}
            ]
          },
          {
            "package-name": "safe",
            "version-range": ">=0.3.3",
            "library": [
              {}
            ]
          },
          {
            "package-name": "setenv",
            "version-range": ">=0.1",
            "library": [
              {}
            ]
          },
          {
            "package-name": "text",
            "version-range": ">=0.11.3",
            "library": [
              {}
            ]
          },
          {
            "package-name": "time",
            "version-range": ">=1.5",
            "library": [
              {}
            ]
          },
          {
            "package-name": "unordered-containers",
            "version-range": ">=0.2.3.0",
            "library": [
              {}
            ]
          },
          {
            "package-name": "vector",
            "version-range": ">=0.10.0.1",
            "library": [
              {}
            ]
          }
        ],
        "mixins": []
      }
    },
    "condTreeConstraints": [
      {
        "package-name": "aeson",
        "version-range": ">=1.5.6.0",
        "library": [
          {}
        ]
      },
      {
        "package-name": "aeson-pretty",
        "version-range": ">=0.7",
        "library": [
          {}
        ]
      },
      {
        "package-name": "api-tools",
        "version-range": ">=0.9.0.0",
        "library": [
          {}
        ]
      },
      {
        "package-name": "array",
        "version-range": ">=0.5.4.0",
        "library": [
          {}
        ]
      },
      {
        "package-name": "asn1-types",
        "version-range": ">=0.2.0",
        "library": [
          {}
        ]
      },
      {
        "package-name": "asn1-encoding",
        "version-range": ">=0.8.0",
        "library": [
          {}
        ]
      },
      {
        "package-name": "ansi-wl-pprint",
        "version-range": ">=0.6.7",
        "library": [
          {}
        ]
      },
      {
        "package-name": "base",
        "version-range": ">=4.8",
        "library": [
          {}
        ]
      },
      {
        "package-name": "base64-bytestring",
        "version-range": ">=1.0",
        "library": [
          {}
        ]
      },
      {
        "package-name": "byteable",
        "version-range": ">=0.1",
        "library": [
          {}
        ]
      },
      {
        "package-name": "bytestring",
        "version-range": ">=0.9",
        "library": [
          {}
        ]
      },
      {
        "package-name": "crypto-pubkey-types",
        "version-range": ">=0.4.3",
        "library": [
          {}
        ]
      },
      {
        "package-name": "crypton",
        "version-range": ">=0.32",
        "library": [
          {}
        ]
      },
      {
        "package-name": "containers",
        "version-range": ">=0.4",
        "library": [
          {}
        ]
      },
      {
        "package-name": "directory",
        "version-range": ">=1.2",
        "library": [
          {}
        ]
      },
      {
        "package-name": "filepath",
        "version-range": ">=1.3",
        "library": [
          {}
        ]
      },
      {
        "package-name": "lens",
        "version-range": ">=3.9.2",
        "library": [
          {}
        ]
      },
      {
        "package-name": "memory",
        "version-range": ">=0.17.0",
        "library": [
          {}
        ]
      },
      {
        "package-name": "mtl",
        "version-range": ">=2",
        "library": [
          {}
        ]
      },
      {
        "package-name": "old-locale",
        "version-range": ">=1.0.0.5",
        "library": [
          {}
        ]
      },
      {
        "package-name": "optparse-applicative",
        "version-range": ">=0.11.0",
        "library": [
          {}
        ]
      },
      {
        "package-name": "pbkdf",
        "version-range": ">=1.1.1.0",
        "library": [
          {}
        ]
      },
      {
        "package-name": "regex",
        "version-range": ">=1.0.1.3",
        "library": [
          {}
        ]
      },
      {
        "package-name": "regex-base",
        "version-range": ">=0.94.0.2",
        "library": [
          {}
        ]
      },
      {
        "package-name": "regex-tdfa",
        "version-range": ">=1.3.1.2",
        "library": [
          {}
        ]
      },
      {
        "package-name": "safe",
        "version-range": ">=0.3.3",
        "library": [
          {}
        ]
      },
      {
        "package-name": "setenv",
        "version-range": ">=0.1",
        "library": [
          {}
        ]
      },
      {
        "package-name": "text",
        "version-range": ">=0.11.3",
        "library": [
          {}
        ]
      },
      {
        "package-name": "time",
        "version-range": ">=1.5",
        "library": [
          {}
        ]
      },
      {
        "package-name": "unordered-containers",
        "version-range": ">=0.2.3.0",
        "library": [
          {}
        ]
      },
      {
        "package-name": "vector",
        "version-range": ">=0.10.0.1",
        "library": [
          {}
        ]
      }
    ],
    "condTreeComponents": []
  },
  "executables": {
    "deploy": {
      "condTreeData": {
        "name": "deploy",
        "module-path": "deploy.hs",
        "scope": "public",
        "build-info": {
          "buildable": true,
          "buildTools": [],
          "buildToolDepends": [],
          "cppOptions": [],
          "asmOptions": [],
          "cmmOptions": [],
          "ccOptions": [],
          "cxxOptions": [],
          "ldOptions": [],
          "pkgconfigDepends": [],
          "frameworks": [],
          "extraFrameworkDirs": [],
          "asmSources": [],
          "cmmSources": [],
          "cSources": [],
          "cxxSources": [],
          "jsSources": [],
          "hsSourceDirs": [
            "examples/deploy"
          ],
          "otherModules": [
            [
              "Deploy",
              "Cmd"
            ],
            [
              "Deploy",
              "Deploy"
            ],
            [
              "Deploy",
              "HostSectionKey"
            ]
          ],
          "virtualModules": [],
          "autogenModules": [],
          "defaultLanguage": "Haskell2010",
          "otherLanguages": [],
          "defaultExtensions": [],
          "otherExtensions": [],
          "oldExtensions": [],
          "extraLibs": [],
          "extraGHCiLibs": [],
          "extraBundledLibs": [],
          "extraLibFlavours": [],
          "extraDynLibFlavours": [],
          "extraLibDirs": [],
          "includeDirs": [],
          "includes": [],
          "autogenIncludes": [],
          "installIncludes": [],
          "options": [
            [
              "-Wall",
              "-fno-warn-warnings-deprecations"
            ],
            []
          ],
          "profOptions": [
            [],
            []
          ],
          "sharedOptions": [
            [],
            []
          ],
          "staticOptions": [
            [],
            []
          ],
          "customFieldsBI": [],
          "targetBuildDepends": [
            {
              "package-name": "api-tools",
              "version-range": ">=0.4",
              "library": [
                {}
              ]
            },
            {
              "package-name": "ansi-wl-pprint",
              "version-range": ">=0.6.7.1",
              "library": [
                {}
              ]
            },
            {
              "package-name": "aeson",
              "version-range": ">=0.8",
              "library": [
                {}
              ]
            },
            {
              "package-name": "base",
              "version-range": ">=4.8",
              "library": [
                {}
              ]
            },
            {
              "package-name": "bytestring",
              "version-range": ">=0.9",
              "library": [
                {}
              ]
            },
            {
              "package-name": "directory",
              "version-range": ">=1.0",
              "library": [
                {}
              ]
            },
            {
              "package-name": "filepath",
              "version-range": ">=1.1",
              "library": [
                {}
              ]
            },
            {
              "package-name": "keystore",
              "version-range": "-any",
              "library": [
                {}
              ]
            },
            {
              "package-name": "mtl",
              "version-range": ">=2",
              "library": [
                {}
              ]
            },
            {
              "package-name": "optparse-applicative",
              "version-range": ">=0.11.0",
              "library": [
                {}
              ]
            },
            {
              "package-name": "process",
              "version-range": ">=1.2.0.0",
              "library": [
                {}
              ]
            },
            {
              "package-name": "raw-strings-qq",
              "version-range": ">=1.0.2",
              "library": [
                {}
              ]
            },
            {
              "package-name": "setenv",
              "version-range": ">=0.1",
              "library": [
                {}
              ]
            },
            {
              "package-name": "text",
              "version-range": ">=0.11.3",
              "library": [
                {}
              ]
            },
            {
              "package-name": "unordered-containers",
              "version-range": ">=0.2.3.0",
              "library": [
                {}
              ]
            }
          ],
          "mixins": []
        }
      },
      "condTreeConstraints": [
        {
          "package-name": "api-tools",
          "version-range": ">=0.4",
          "library": [
            {}
          ]
        },
        {
          "package-name": "ansi-wl-pprint",
          "version-range": ">=0.6.7.1",
          "library": [
            {}
          ]
        },
        {
          "package-name": "aeson",
          "version-range": ">=0.8",
          "library": [
            {}
          ]
        },
        {
          "package-name": "base",
          "version-range": ">=4.8",
          "library": [
            {}
          ]
        },
        {
          "package-name": "bytestring",
          "version-range": ">=0.9",
          "library": [
            {}
          ]
        },
        {
          "package-name": "directory",
          "version-range": ">=1.0",
          "library": [
            {}
          ]
        },
        {
          "package-name": "filepath",
          "version-range": ">=1.1",
          "library": [
            {}
          ]
        },
        {
          "package-name": "keystore",
          "version-range": "-any",
          "library": [
            {}
          ]
        },
        {
          "package-name": "mtl",
          "version-range": ">=2",
          "library": [
            {}
          ]
        },
        {
          "package-name": "optparse-applicative",
          "version-range": ">=0.11.0",
          "library": [
            {}
          ]
        },
        {
          "package-name": "process",
          "version-range": ">=1.2.0.0",
          "library": [
            {}
          ]
        },
        {
          "package-name": "raw-strings-qq",
          "version-range": ">=1.0.2",
          "library": [
            {}
          ]
        },
        {
          "package-name": "setenv",
          "version-range": ">=0.1",
          "library": [
            {}
          ]
        },
        {
          "package-name": "text",
          "version-range": ">=0.11.3",
          "library": [
            {}
          ]
        },
        {
          "package-name": "unordered-containers",
          "version-range": ">=0.2.3.0",
          "library": [
            {}
          ]
        }
      ],
      "condTreeComponents": []
    },
    "ks": {
      "condTreeData": {
        "name": "ks",
        "module-path": "ks.hs",
        "scope": "public",
        "build-info": {
          "buildable": true,
          "buildTools": [],
          "buildToolDepends": [],
          "cppOptions": [],
          "asmOptions": [],
          "cmmOptions": [],
          "ccOptions": [],
          "cxxOptions": [],
          "ldOptions": [],
          "pkgconfigDepends": [],
          "frameworks": [],
          "extraFrameworkDirs": [],
          "asmSources": [],
          "cmmSources": [],
          "cSources": [],
          "cxxSources": [],
          "jsSources": [],
          "hsSourceDirs": [
            "main"
          ],
          "otherModules": [],
          "virtualModules": [],
          "autogenModules": [],
          "defaultLanguage": "Haskell2010",
          "otherLanguages": [],
          "defaultExtensions": [],
          "otherExtensions": [],
          "oldExtensions": [],
          "extraLibs": [],
          "extraGHCiLibs": [],
          "extraBundledLibs": [],
          "extraLibFlavours": [],
          "extraDynLibFlavours": [],
          "extraLibDirs": [],
          "includeDirs": [],
          "includes": [],
          "autogenIncludes": [],
          "installIncludes": [],
          "options": [
            [
              "-Wall",
              "-fno-warn-warnings-deprecations"
            ],
            []
          ],
          "profOptions": [
            [],
            []
          ],
          "sharedOptions": [
            [],
            []
          ],
          "staticOptions": [
            [],
            []
          ],
          "customFieldsBI": [],
          "targetBuildDepends": [
            {
              "package-name": "base",
              "version-range": ">4 && <5",
              "library": [
                {}
              ]
            },
            {
              "package-name": "keystore",
              "version-range": "-any",
              "library": [
                {}
              ]
            }
          ],
          "mixins": []
        }
      },
      "condTreeConstraints": [
        {
          "package-name": "base",
          "version-range": ">4 && <5",
          "library": [
            {}
          ]
        },
        {
          "package-name": "keystore",
          "version-range": "-any",
          "library": [
            {}
          ]
        }
      ],
      "condTreeComponents": []
    }
  }
}
